(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9640341c"],{"062c":function(e,t,a){"use strict";a("3b03")},"15c7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("span",[e._t("default")],2)])],1)},n=[],s={data:function(){return{form:{}}},created:function(){},methods:{}},i=s,o=(a("af3b"),a("47d4"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=l.exports},"28fb":function(e,t,a){},3884:function(e,t,a){},"3b03":function(e,t,a){},"47d4":function(e,t,a){"use strict";a("3884")},4826:function(e,t,a){"use strict";a("572d")},"521f":function(e,t,a){},"572d":function(e,t,a){},"697e":function(e,t,a){"use strict";a("28fb")},"7b73":function(e,t,a){"use strict";a("cc0d")},"7db0":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").find,s=a("44d2"),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},8636:function(e,t,a){},a8e7:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"","header-cell-style":e.tableHeaderColor}},[e._t("default")],2)},n=[],s={props:{tableData:{type:Array}},data:function(){return{}},created:function(){},methods:{tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: rgb(243, 246, 251);rgb(102, 102, 102);font-weight: 500;"}}},i=s,o=(a("4826"),a("062c"),a("697e"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"32777c81",null);t["a"]=l.exports},af3b:function(e,t,a){"use strict";a("8636")},cc0d:function(e,t,a){},ce5d:function(e,t,a){"use strict";a("db9c")},d92f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("Search",{scopedSlots:e._u([{key:"default",fn:function(){return[a("el-form-item",{attrs:{label:"人员搜索："}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.usernameValue,callback:function(t){e.usernameValue=t},expression:"usernameValue"}})],1),a("el-form-item",[a("el-button",{staticClass:"search-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)]},proxy:!0}])}),a("div",{staticClass:"result"},[a("div",{staticClass:"personnal"},[a("Button",{staticClass:"xinjian",attrs:{icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){return e.showAddDept(t)}}},[e._v("新建")])],1),a("Table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{tableData:e.tableData},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._l(e.personnelList,(function(e){return a("el-table-column",{key:e.id,attrs:{property:e.property,label:e.label,width:e.width}})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.onEdit(t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"perple-del",attrs:{type:"text",size:"small"},on:{click:function(a){return e.onRemove(t.row)}}},[e._v("删除")])]}}])})]},proxy:!0}])}),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,total:+e.$store.state.person.personnelList.totalCount},on:{"next-click":e.nextClick,"prev-click":e.prevClick}})],1)],1),a("Dialog",{ref:"addPerson",attrs:{dialogTitle:e.dialogTitle,editList:e.editList,visible:e.dialogVisible},on:{"update:editList":function(t){e.editList=t},"update:edit-list":function(t){e.editList=t},"update:visible":function(t){e.dialogVisible=t},"add-success":e.loadDepts}})],1)])},n=[],s=a("c7eb"),i=a("1da1"),o=(a("d3b7"),a("159b"),a("498a"),a("15c7")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{icon:e.icon}},[a("span",[e._t("default")],2)])},c=[],u={props:{icon:{type:String}},data:function(){return{}},created:function(){},methods:{}},d=u,f=(a("7b73"),a("2877")),m=Object(f["a"])(d,l,c,!1,null,"a256d87a",null),p=m.exports,b=a("a8e7"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"60%"},on:{close:e.onClose}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:" 人员名称",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"12"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.roleId,callback:function(t){e.$set(e.formData,"roleId",t)},expression:"formData.roleId"}},e._l(e.employees,(function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"负责区域",prop:"regionName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.seletChange},model:{value:e.formData.regionId,callback:function(t){e.$set(e.formData,"regionId",t)},expression:"formData.regionId"}},e._l(e.area,(function(e){return a("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"头像",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,multiple:!1,"http-request":e.httpRequest,"on-change":e.fileChange}},[e.formData.image?a("img",{staticClass:"avatar",attrs:{src:e.formData.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持扩展名：jpg、jpeg、png，文件不得大于100kb ")])])],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-checkbox",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[e._v("是否启用")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确 定")])],1)],1)},h=[],v=(a("7db0"),a("3f6e")),x={props:{visible:{type:Boolean,required:!0},dialogTitle:{type:String,required:!0}},data:function(){return{formData:{userName:"",roleId:"",mobile:"",regionName:"",regionId:"",image:"",status:!1},loadingstate:!1,formRules:{userName:[{required:!0,message:"请输入名字",trigger:"blur"},{min:1,max:5,message:"名字长度在5个字符以内",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],regionName:[{required:!0,message:"请选择区域",trigger:"change"}],image:[{required:!0,message:"请上传头像",trigger:"change"}]},employees:[],area:[]}},computed:{},created:function(){this.getAreaList(),this.getRoleList()},methods:{seletChange:function(e){var t={};t=this.area.find((function(t){return t.id===e})),this.formData.regionName=t.remark},getAreaList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["d"])({pageIndex:1,pageSize:1e4});case 2:a=t.sent,e.area=a.data.currentPageRecords;case 4:case"end":return t.stop()}}),t)})))()},getRoleList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["h"])();case 2:a=t.sent,e.employees=a.data;case 4:case"end":return t.stop()}}),t)})))()},onClose:function(){this.$emit("update:visible",!1),this.$refs.form.resetFields(),this.formData={userName:"",roleId:"",mobile:"",regionName:"",regionId:"",image:"",status:!1}},onSave:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(t.prev=2,!e.formData.userId){t.next=11;break}return t.next=6,Object(v["c"])(e.formData,e.formData.userId);case 6:e.$message.success("编辑成功"),e.onClose(),e.$emit("add-success"),t.next=17;break;case 11:return t.next=13,Object(v["a"])(e.formData);case 13:e.$message.success("新增成功"),e.onClose(),e.$emit("add-success"),console.log(22);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](2),e.$message.error("操作失败");case 22:case"end":return t.stop()}}),t,null,[[2,19]])})))()},httpRequest:function(e){return Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},fileChange:function(e,t){var a=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=new FormData,!(e.size>104857.6)){t.next=3;break}return t.abrupt("return",a.$message.error("图片大于100kb,上传失败"));case 3:if("image/jpeg"!=!e.raw.type&&"image/jpg"!=!e.raw.type&&"image/png"!=!e.raw.type){t.next=7;break}return t.abrupt("return",a.$message.error("仅支持扩展名：jpg、jpeg、png"));case 7:return r.append("fileName",e.raw),t.next=10,Object(v["m"])(r).then((function(e){200==e.status&&(a.formData.image=e.data)}));case 10:case"end":return t.stop()}}),t)})))()}}},w=x,k=(a("ce5d"),Object(f["a"])(w,g,h,!1,null,null,null)),j=k.exports,D={components:{Search:o["a"],Button:p,Table:b["a"],Dialog:j},data:function(){return{dialogVisible:!1,usernameValue:"",pageIndex:1,personnelList:[{property:"userName",label:"人员名称"},{property:"regionName",label:"归属区域"},{property:"roleName",label:"角色"},{property:"mobile",label:"联系电话"}],tableData:[],editList:{},dialogTitle:"",loading:!1}},created:function(){this.getPersonnelList()},methods:{getPersonnelList:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,t.$store.dispatch("person/getPersonnelList",e);case 3:r=[],t.$store.state.person.personnelList.currentPageRecords.forEach((function(e){r.push({userName:e.userName,regionName:e.regionName,roleName:e.role.roleName,mobile:e.mobile,id:e.id})})),t.loading=!1,t.tableData=r;case 7:case"end":return a.stop()}}),a)})))()},nextClick:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pageIndex++,e.getPersonnelList({pageIndex:e.pageIndex});case 2:case"end":return t.stop()}}),t)})))()},prevClick:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pageIndex--,e.getPersonnelList({pageIndex:e.pageIndex});case 2:case"end":return t.stop()}}),t)})))()},search:function(){if(""==this.usernameValue.trim())return this.usernameValue="",this.$message.error("搜索词不能为空");this.getPersonnelList({userName:this.usernameValue})},showAddDept:function(){this.dialogVisible=!0,this.dialogTitle="添加人员"},loadDepts:function(){this.getPersonnelList({pageIndex:this.pageIndex})},onRemove:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("此操作将永久删除该人员, 是否确定?","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return a.next=5,Object(v["b"])(e.id);case 5:t.$message.success("删除成功"),t.loadDepts(),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()},onEdit:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var r,n;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialogVisible=!0,t.dialogTitle="编辑人员信息",a.next=4,Object(v["f"])(e.id);case 4:r=a.sent,n=r.data,t.$refs.addPerson.formData.userName=n.userName,t.$refs.addPerson.formData.regionName=n.regionName,t.$refs.addPerson.formData.roleId=n.roleId,t.$refs.addPerson.formData.mobile=n.mobile,t.$refs.addPerson.formData.regionId=n.regionId,t.$refs.addPerson.formData.image=n.image,t.$refs.addPerson.formData.status=n.status,t.$refs.addPerson.formData.userId=n.userId;case 7:case"end":return a.stop()}}),a)})))()}}},O=D,y=(a("f209"),Object(f["a"])(O,r,n,!1,null,"152e282a",null));t["default"]=y.exports},db9c:function(e,t,a){},f209:function(e,t,a){"use strict";a("521f")}}]);