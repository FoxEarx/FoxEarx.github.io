(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0792898"],{"61cb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Search",{attrs:{title:"区域搜索"},on:{searchArea:e.searchArea}}),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("Button",{attrs:{icon:"el-icon-circle-plus-outline",text:"新建",color:"linear-gradient(135deg,#ff9743,#ff5e20)!important"},nativeOn:{click:function(t){return e.addArea(t)}}}),a("NList",{attrs:{tableData:e.areaInfo.currentPageRecords,table:e.table},scopedSlots:e._u([{key:"operation",fn:function(t){var r=t.data;return[a("TextButton",{attrs:{text:"查看详情"},nativeOn:{click:function(t){return e.diaShow(r)}}}),a("TextButton",{attrs:{text:"修改"},nativeOn:{click:function(t){return e.editDialod(t)}}}),a("TextButton",{attrs:{text:"删除",color:"red"},nativeOn:{click:function(t){return e.delAreaInfo(t)}}})]}}])}),a("Pagination",{attrs:{areaInfo:e.areaInfo},on:{nextPage:e.nextPage,prevPage:e.prevPage,currentPage:e.currentPage}})],1),a("Dialog",{attrs:{title:e.title,dialogVisible:e.dialogVisible},on:{close:e.onClose}},["区域详情"!==e.title?a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称:",prop:"regionName"}},[a("el-input",{attrs:{maxlength:"15","show-word-limit":"",placeholder:"请输入"},model:{value:e.formData.regionName,callback:function(t){e.$set(e.formData,"regionName",t)},expression:"formData.regionName"}})],1),a("el-form-item",{attrs:{label:"备注说明:",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",maxlength:"40","show-word-limit":"",placeholder:"请输入备注(不超过40字)"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("div",{staticClass:"flootButton"},[a("Button",{attrs:{text:"取消",color:"#fbf4f0",textColor:"#333"},nativeOn:{click:function(t){return e.onClose(t)}}}),a("Button",{staticClass:"el-button--primary1",attrs:{text:"确认",color:"linear-gradient(135deg,#ff9743,#ff5e20)"},nativeOn:{click:function(t){return e.editAreaInfo(t)}}})],1)],1):a("el-form",{attrs:{model:e.formData,rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称:"}},[e._v(e._s(e.columnInfo.name))]),a("el-form-item",{attrs:{label:"包含点位:"}},[a("NList",{staticClass:"dialog",attrs:{table:e.areaTable,tableData:e.nodeInfo,show:!1}})],1)],1)],1)],1)},n=[],o=a("c7eb"),i=a("1da1"),s=(a("b0c0"),a("d2ff")),c=a("3b96"),l=a("2258"),u=a("366e"),f=a("c0eb"),m=a("333d"),d=a("365c"),b={data:function(){return{table:[{label:"区域名称",prop:"name"},{label:"点位数",prop:"nodeCount"},{label:"备注说明",prop:"remark"}],areaInfo:{},dialogVisible:!1,areaTable:[{label:"点位名称",prop:"name"},{label:"设备数量",prop:"vmCount"}],nodeInfo:[],columnInfo:{},formData:{regionName:"",remark:""},formRules:{regionName:[{required:!0,trigger:"change",message:"请输入"}],remark:[{required:!0,trigger:"change",message:"请输入"}]},title:""}},created:function(){this.getLocationList()},methods:{getLocationList:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["C"])(e);case 2:r=a.sent,t.areaInfo=r.data;case 4:case"end":return a.stop()}}),a)})))()},searchArea:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,Object(d["C"])(t.areaInfo.pageIndex,e);case 4:r=a.sent,t.areaInfo=r.data;case 6:case"end":return a.stop()}}),a)})))()},addArea:function(){this.title="新增区域",this.dialogVisible=!0},prevPage:function(){this.getLocationList(--this.areaInfo.pageIndex)},nextPage:function(){this.getLocationList(++this.areaInfo.pageIndex)},currentPage:function(e){this.getLocationList(e)},diaShow:function(){var e=this;this.title="区域详情",setTimeout(Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!0,e.columnInfo=e.$store.state.location.columnInfo,t.next=4,Object(d["A"])(e.columnInfo.id);case 4:a=t.sent,e.nodeInfo=a.data.currentPageRecords;case 6:case"end":return t.stop()}}),t)}))))},editDialod:function(){var e=this;this.title="修改区域",setTimeout((function(){e.dialogVisible=!0;var t=e.$store.state.location.columnInfo,a=t.name,r=t.remark,n=t.id;e.formData.regionName=a,e.formData.remark=r,e.formData.id=n}))},editAreaInfo:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:if(!e.formData.id){t.next=9;break}return t.next=6,Object(d["w"])(e.formData);case 6:e.$message.success("修改成功"),t.next=12;break;case 9:return t.next=11,Object(d["g"])(e.formData);case 11:e.$message.success("添加成功");case 12:e.onClose(),e.getLocationList(e.areaInfo.pageIndex),t.next=18;break;case 16:t.prev=16,t.t0=t["catch"](0);case 18:case"end":return t.stop()}}),t,null,[[0,16]])})))()},delAreaInfo:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$confirm("是否确定删除该区域?","提示",{confirmButtonText:"删除",cancelButtonText:"取消"});case 3:return t.next=5,Object(d["s"])(e.$store.state.location.columnInfo.id);case 5:t.sent,e.$message.success("删除成功"),e.onClose(),e.getLocationList(e.areaInfo.pageIndex),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$message.error(t.t0.response.data);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onClose:function(){this.dialogVisible=!1,void 0!==this.$refs.form&&this.$refs.form.resetFields(),this.formData={regionName:"",remark:""}}},components:{Search:c["a"],NList:l["a"],Button:u["a"],TextButton:f["a"],Pagination:m["a"],Dialog:s["a"]}},g=b,p=(a("b2c6"),a("2877")),h=Object(p["a"])(g,r,n,!1,null,"456be1e1",null);t["default"]=h.exports},b2c6:function(e,t,a){"use strict";a("dc8a")},dc8a:function(e,t,a){}}]);