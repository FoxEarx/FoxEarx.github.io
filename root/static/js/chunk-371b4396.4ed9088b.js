(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-371b4396"],{"14cf":function(t,e,a){"use strict";a("7180")},7180:function(t,e,a){},dcab:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Search",{attrs:{title:"合作商搜索"},on:{searchArea:t.searchPartners}}),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("Button",{attrs:{text:"新增",icon:"el-icon-circle-plus-outline",color:"linear-gradient(135deg, rgb(255, 151, 67), rgb(255, 94, 32))"},nativeOn:{click:function(e){return t.addPartners(e)}}}),a("NList",{attrs:{tableData:t.partnersList.currentPageRecords,table:t.table,width:"250px"},scopedSlots:t._u([{key:"operation",fn:function(){return[a("TextButton",{attrs:{text:"重置密码"},nativeOn:{click:function(e){return t.resetPwd(e)}}}),a("TextButton",{attrs:{text:"查看详情"},nativeOn:{click:function(e){return t.partnersInfo(e)}}}),a("TextButton",{attrs:{text:"修改"},nativeOn:{click:function(e){return t.editPartnersInfo(e)}}}),a("TextButton",{attrs:{text:"删除",color:"red"},nativeOn:{click:function(e){return t.delPartners(e)}}})]},proxy:!0}])}),t.partnersList.totalCount>10?a("Pagination",{attrs:{areaInfo:t.partnersList},on:{nextPage:t.nextPage,prevPage:t.prevPage,currentPage:t.currentPage}}):t._e()],1),a("Dialod",{attrs:{title:t.title,dialogVisible:t.dialogVisible},on:{close:t.onClose}},["合作商详情"===t.title?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{staticClass:"col-left",attrs:{span:12}},[t._v("合作商名称:")]),a("el-col",{attrs:{span:12}},[t._v(t._s(this.partnersDetail.name))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{staticClass:"col-left",attrs:{span:12}},[t._v("联系人:")]),a("el-col",{attrs:{span:12}},[t._v(t._s(this.partnersDetail.contact))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{staticClass:"col-left",attrs:{span:12}},[t._v("联系电话:")]),a("el-col",{attrs:{span:12}},[t._v(t._s(this.partnersDetail.mobile))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{staticClass:"col-left",attrs:{span:12}},[t._v("分成比例:")]),a("el-col",{attrs:{span:12}},[t._v(t._s(this.partnersDetail.ratio))])],1)],1)],1):a("el-form",{ref:"form",attrs:{model:t.partnersDetail,rules:t.formRules}},[a("el-form-item",{attrs:{label:"合作商名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"10","show-word-limit":""},model:{value:t.partnersDetail.name,callback:function(e){t.$set(t.partnersDetail,"name",e)},expression:"partnersDetail.name"}})],1),a("el-form-item",{attrs:{label:"联系人:",prop:"contact"}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"10","show-word-limit":""},model:{value:t.partnersDetail.contact,callback:function(e){t.$set(t.partnersDetail,"contact",e)},expression:"partnersDetail.contact"}})],1),a("el-form-item",{attrs:{label:"联系电话:",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"11","show-word-limit":""},model:{value:t.partnersDetail.mobile,callback:function(e){t.$set(t.partnersDetail,"mobile",e)},expression:"partnersDetail.mobile"}})],1),a("el-form-item",{attrs:{label:"分成比例(%):",prop:"ratio"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100,placeholder:"请输入"},model:{value:t.partnersDetail.ratio,callback:function(e){t.$set(t.partnersDetail,"ratio",e)},expression:"partnersDetail.ratio"}})],1),"新增合作商"===t.title?a("el-form-item",{attrs:{label:"账号:",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"18","show-word-limit":""},model:{value:t.partnersDetail.account,callback:function(e){t.$set(t.partnersDetail,"account",e)},expression:"partnersDetail.account"}})],1):t._e(),"新增合作商"===t.title?a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"18","show-word-limit":""},model:{value:t.partnersDetail.password,callback:function(e){t.$set(t.partnersDetail,"password",e)},expression:"partnersDetail.password"}})],1):t._e(),a("div",{staticClass:"button"},[a("Button",{attrs:{text:"取消",color:"#fbf4f0",textColor:"#655b56"},nativeOn:{click:function(e){return t.onClose(e)}}}),a("Button",{staticClass:"el-button--primary1",attrs:{text:"确定",color:"linear-gradient(135deg,#ff9743,#ff5e20)"},nativeOn:{click:function(e){return t.editPartners(e)}}})],1)],1)],1)],1)},n=[],s=a("c7eb"),i=a("1da1"),o=(a("b0c0"),a("d3b7"),a("159b"),a("e9c4"),a("ac1f"),a("5319"),a("3b96")),l=a("2258"),c=a("366e"),p=a("c0eb"),u=a("333d"),d=a("d2ff"),f=a("365c"),m={data:function(){return{partnersList:{},params:{pageSize:10},table:[{label:"合作商名称",prop:"name"},{label:"账号",prop:"account"},{label:"设备数量",prop:"vmCount"},{label:"分成比例",prop:"ratio"},{label:"联系人",prop:"contact"},{label:"联系电话",prop:"mobile"}],dialogVisible:!1,title:"",partnersDetail:{account:"",password:""},formRules:{name:[{required:!0,message:"请输入合作商名称",trigger:"change"}],contact:[{required:!0,message:"请输入联系人",trigger:"change"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"change"},{pattern:/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/,message:"请输入正确的手机号格式",trigger:"change"}],ratio:[{required:!0,message:"请输入分成比例",trigger:"blur"}],account:[{required:!0,message:"请输入联系人",trigger:"change"}],password:[{required:!0,message:"请输入联系电话",trigger:"change"}]}}},created:function(){this.getPartnersList()},methods:{searchPartners:function(t){this.params.name=t,this.getPartnersList()},getPartnersList:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["E"])(t.params);case 2:a=e.sent,console.log(a.data),a.data.currentPageRecords.forEach((function(t){t.ratio+="%"})),t.partnersList=a.data;case 6:case"end":return e.stop()}}),e)})))()},nextPage:function(){this.params.pageIndex=++this.partnersList.pageIndex,this.getPartnersList()},prevPage:function(){this.params.pageIndex=--this.partnersList.pageIndex,this.getPartnersList()},currentPage:function(t){this.params.pageIndex=t,this.getPartnersList()},onClose:function(){this.dialogVisible=!1,"合作商详情"!==this.title&&(this.$refs.form.resetFields(),this.partnersDetail.account="")},resetPwd:function(){var t=this;this.$msgbox({title:"确定要重置合作商密码吗？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"error"}).then(Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["L"])(t.$store.state.location.columnInfo.id);case 2:t.$message.success("重置密码成功"),t.getPartnersList();case 4:case"end":return e.stop()}}),e)})))).catch((function(){}))},partnersInfo:function(){var t=this;this.title="合作商详情",this.dialogVisible=!0,setTimeout((function(){t.partnersDetail=t.$store.state.location.columnInfo}))},editPartnersInfo:function(){var t=this;this.title="修改合作商",this.dialogVisible=!0,setTimeout((function(){t.partnersDetail=JSON.parse(JSON.stringify(t.$store.state.location.columnInfo)),"string"===typeof t.partnersDetail.ratio&&(t.partnersDetail.ratio=t.partnersDetail.ratio.replace(/%/g,"")),console.log(t.partnersDetail)}))},delPartners:function(){var t=this;setTimeout(Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["t"])(t.$store.state.location.columnInfo.id);case 2:t.$message.success("删除供应商成功"),t.onClose(),t.getPartnersList();case 5:case"end":return e.stop()}}),e)}))))},addPartners:function(){this.title="新增合作商",this.dialogVisible=!0},editPartners:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.form.validate();case 3:if("修改合作商"!==t.title){e.next=9;break}return e.next=6,Object(f["x"])(t.partnersDetail);case 6:t.$message.success("修改信息成功"),e.next=12;break;case 9:return e.next=11,Object(f["l"])(t.partnersDetail);case 11:t.$message.success("新增合作商成功");case 12:t.onClose(),t.getPartnersList(),e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))()}},components:{Search:o["a"],NList:l["a"],Button:c["a"],TextButton:p["a"],Pagination:u["a"],Dialod:d["a"]}},g=m,b=(a("14cf"),a("2877")),h=Object(b["a"])(g,r,n,!1,null,"bb4b541c",null);e["default"]=h.exports}}]);